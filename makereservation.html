<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a reservation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>
<body>
    <br>
    <div class="input-group mb-3">
        <span class="input-group-text" id="firstName">Forename</span>
        <input type="text" class="form-control" placeholder="First name" aria-label="guest's first name" aria-describedby="basic-addon1">
        <span class="input-group-text" id="secondName">Surname</span>
        <input type="text" class="form-control" placeholder="Last Name" aria-label="guest's last name" aria-describedby="basic-addon2">
      </div>
      
      <div class="input-group mb-3">
        <span class="input-group-text" id="beginDate">Start date</span>
        <input type="date" class="form-control" aria-label="guest's begin name" aria-describedby="basic-addon2">
        <span class="input-group-text" id="endDate">End date</span>
        <input type="date" class="form-control" aria-label="guest's end date" aria-describedby="basic-addon2">
      </div>

      <div class="input-group mb-3">
        <span class="input-group-text" id="basic-addon2">Phone Number</span>
        <input type="number" class="form-control" placeholder="31 06 4444444" aria-label="guest's phone number" aria-describedby="basic-addon3">
      </div>

      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="breakfastCheck">
        <label class="form-check-label" for="breakfastCheck">
          Added Breakfast +$3.50
        </label>
      </div>

      <div class="form-check">
        <input class="form-check-input" type="checkbox" value="" id="businessCheck">
        <label class="form-check-label" for="businessCheck">
          Business stay
        </label>
      </div>
      <br>
      <!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
    Place reservation
  </button>
  
  <!-- Modal -->
  <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="staticBackdropLabel">Modal title</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Reservation placed for guest 
        </div>
        <div class="modal-footer">
          <button type="button" onclick="bookR()" class="btn btn-secondary" data-bs-dismiss="modal">Pay at hotel</button>
          <button type="button" class="btn btn-primary">Pay now</button>
        </div>
      </div>
    </div>
  </div>
    <script>
        function bookR(){
            var guest = {};
            guest.firstName = document.getElementById("firstName").value;

            var reservation = {};
            reservation.paymentStatus = true;
            reservation.amountPeople = document.getElementById("amountPeople").value;
            reservation.roomNumber = 3;
            reservation.beginDate = document.getElementById("beginDate").value;
            reservation.endDate = document.getElementById("endDate").value;
            reservation.breakfast = document.getElementById("breakfastCheck").value;
            reservation.business = document.getElementById("businessCheck").value;

            var theJSONG = JSON.stringify(guest);
            var xhrG = new XMLHttpRequest();
            xhrG.onreadystatechange = function(){
                if(this.readyState == 4){
                    console.log("Guest added succesfully")
                }
            }
            var theJSONR = JSON.stringify(reservation);
            var xhrR = new XMLHttpRequest();
            xhrR.onreadystatechange = function(){
                if(this.readyState == 4){
                    console.log("Reservation added succesfully")
                }
            }
            xhrG.open("POST", "http://localhost:8080/addcustomer", true)
            xhrG.setRequestHeader("Content-Type","application/json");
            xhrG.send(theJSONG);

            xhrR.open("POST", "http://localhost:8080/addreservation/approve", true)
            xhrR.setRequestHeader("Content-Type","application/json");
            xhrR.send(theJSONR);
        }

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
</body>
</html>